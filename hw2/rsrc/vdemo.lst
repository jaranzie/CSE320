000000		.	=	150000
050000		
		call	=	170756
		ret	=	171013
		ret0	=	171010
		mul	=	171442
		div	=	171327
		vclrsc	=	172376
		
		MAXX	=	256.
		MAXY	=	512.
		NL	=	300.
		
		
	000700		clr	r0
050001	001100		mov	r0, @flag
	150401	
050003	000004		jsr	r5, call
	000760	
	000756	
050006	172376		vclrsc
050007	000004		jsr	r5, call
	000760	
	000756	
050012	152711		srand
050013	000700		clr	r0
050014	001100		mov	r0, @x1
	150366	
050016	001100		mov	r0, @y1
	150370	
050020	001100		mov	r0, @x2
	150367	
050022	001100		mov	r0, @y2
	150371	
050024	001100		mov	r0, @cnt1
	150372	
050026	001100		mov	r0, @cnt2
	150373	
050030	001100		mov	r0, @at
	150374	
050032	001200	loop:	mov	@flag, r0
	150401	
050034	000200		tst	r0
050035	001004		bze	lo.3
	000024	
050037	000251		mov	r5, r1
050040	001371		add	tx1, r1
	150402	
050042	001210		mov	@r1, r0
050043	000251		mov	r5, r1
050044	001371		add	tx2, r1
	151056	
050046	001212		mov	@r1, r2
050047	000251		mov	r5, r1
050050	001371		add	ty2, r1
	152206	
050052	001213		mov	@r1, r3
050053	000251		mov	r5, r1
050054	001371		add	ty1, r1
	151532	
050056	001211		mov	@r1, r1
050057	000004		jsr	r5, call
	000760	
	000756	
050062	152677		pline
050063		lo.3:
	001200		mov	@cnt1, r0
	150372	
050065	000200		tst	r0
050066	001014		bnze	lo.1
	000012	
050070	001270		mov	10., r0
	000012	
050072	000004		jsr	r5, call
	000760	
	000756	
050075	152662		rnd
050076	000010		inc	r0
050077	000201		mov	r0, r1
050100	000115		sll	2, r1
050101	000310		add	r1, r0
050102	000020	lo.1:	dec	r0
050103	001100		mov	r0, @cnt1
	150372	
050105	001200		mov	@cnt2, r0
	150373	
050107	000200		tst	r0
050110	001014		bnze	lo.2
	000056	
050112	001271		mov	9., r1
	000011	
050114	000210		mov	r1, r0
050115	001272		mov	4, r2
	000004	
050117	000004		jsr	r5, call
	000760	
	000756	
050122	152662		rnd
050123	000420		sub	r2, r0
050124	001100		mov	r0, @dx1
	150375	
050126	000210		mov	r1, r0
050127	000004		jsr	r5, call
	000760	
	000756	
050132	152662		rnd
050133	000420		sub	r2, r0
050134	001100		mov	r0, @dy1
	150377	
050136	000210		mov	r1, r0
050137	000004		jsr	r5, call
	000760	
	000756	
050142	152662		rnd
050143	000420		sub	r2, r0
050144	001100		mov	r0, @dx2
	150376	
050146	000210		mov	r1, r0
050147	000004		jsr	r5, call
	000760	
	000756	
050152	152662		rnd
050153	000420		sub	r2, r0
050154	001100		mov	r0, @dy2
	150400	
050156	001270		mov	10., r0
	000012	
050160	000004		jsr	r5, call
	000760	
	000756	
050163	152662		rnd
050164	000010		inc	r0
050165	000201		mov	r0, r1
050166	000115		sll	2, r1
050167	000310		add	r1, r0
050170	000020	lo.2:	dec	r0
050171	001100		mov	r0, @cnt2
	150373	
050173	001200		mov	@y2, r0
	150371	
050175	001300		add	@dy2, r0
	150400	
050177	001015		bge	upy2.1
	000002	
050201	001000		b	upy2.2
	000004	
050203	001570	upy2.1:	cmp	MAXY, r0
	001000	
050205	001005		blt	upy1
	000007	
050207	001200	upy2.2:	mov	@dy2, r0
	150400	
050211	000040		neg	r0
050212	001100		mov	r0, @dy2
	150400	
050214	001200		mov	@y2, r0
	150371	
050216	000203	upy1:	mov	r0, r3
050217	001200		mov	@y1, r0
	150370	
050221	001300		add	@dy1, r0
	150377	
050223	001015		bge	upy1.1
	000002	
050225	001000		b	upy1.2
	000004	
050227	001570	upy1.1:	cmp	MAXY, r0
	001000	
050231	001005		blt	upx2
	000007	
050233	001200	upy1.2:	mov	@dy1, r0
	150377	
050235	000040		neg	r0
050236	001100		mov	r0, @dy1
	150377	
050240	001200		mov	@y1, r0
	150370	
050242	000201	upx2:	mov	r0, r1
050243	001200		mov	@x2, r0
	150367	
050245	001300		add	@dx2, r0
	150376	
050247	001015		bge	upx2.1
	000002	
050251	001000		b	upx2.2
	000004	
050253	001570	upx2.1:	cmp	MAXX, r0
	000400	
050255	001005		blt	upx1
	000007	
050257	001200	upx2.2:	mov	@dx2, r0
	150376	
050261	000040		neg	r0
050262	001100		mov	r0, @dx2
	150376	
050264	001200		mov	@x2, r0
	150367	
050266	000202	upx1:	mov	r0, r2
050267	001200		mov	@x1, r0
	150366	
050271	001300		add	@dx1, r0
	150375	
050273	001015		bge	upx1.1
	000002	
050275	001000		b	upx1.2
	000004	
050277	001570	upx1.1:	cmp	MAXX, r0
	000400	
050301	001005		blt	done
	000007	
050303	001200	upx1.2:	mov	@dx1, r0
	150375	
050305	000040		neg	r0
050306	001100		mov	r0, @dx1
	150375	
050310	001200		mov	@x1, r0
	150366	
050312	000004	done:	jsr	r5, call
	000760	
	000756	
050315	152677		pline
050316	001100		mov	r0, @x1
	150366	
050320	001101		mov	r1, @y1
	150370	
050322	001102		mov	r2, @x2
	150367	
050324	001103		mov	r3, @y2
	150371	
050326	001204		mov	@at, r4
	150374	
050330	000245		mov	r4, r5
050331	001374		add	tx1, r4
	150402	
050333	001140		mov	r0, @r4
050334	000254		mov	r5, r4
050335	001374		add	ty1, r4
	151532	
050337	001141		mov	r1, @r4
050340	000254		mov	r5, r4
050341	001374		add	tx2, r4
	151056	
050343	001142		mov	r2, @r4
050344	000254		mov	r5, r4
050345	001374		add	ty2, r4
	152206	
050347	001143		mov	r3, @r4
050350	000015		inc	r5
050351	001575		cmp	NL, r5
	000454	
050353	001005		blt	lo.5
	000005	
050355	000755		clr	r5
050356	001270		mov	1, r0
	000001	
050360	001100		mov	r0, @flag
	150401	
050362	001105	lo.5:	mov	r5, @at
	150374	
050364	001040		b	loop
	000333	
050366		
	000000	x1:	0
050367	000000	x2:	0
050370	000000	y1:	0
050371	000000	y2:	0
050372	000000	cnt1:	0
050373	000000	cnt2:	0
050374	000000	at:	0
050375	000000	dx1:	0
050376	000000	dx2:	0
050377	000000	dy1:	0
050400	000000	dy2:	0
050401	000000	flag:	0
050402		tx1:	.	=	. + NL
051056		tx2:	.	=	. + NL
051532		ty1:	.	=	. + NL
052206		ty2:	.	=	. + NL
052662	000202	rnd:	mov	r0, r2
052663	000004		jsr	r5, call
	000760	
	000756	
052666	152715		rand
052667	000201		mov	r0, r1
052670	000700		clr	r0
052671	000004		jsr	r5, call
	000760	
	000756	
052674	171327		div
052675	001000		b	ret0
	016111	
052677		
	001274	pline:	mov	777, r4
	000777	
052701	000641		and	r4, r1
052702	000643		and	r4, r3
052703	001274		mov	377, r4
	000377	
052705	000640		and	r4, r0
052706	000642		and	r4, r2
052707	001000		b	line
	000070	
052711		
		.incld	rand.16
	001100	srand:	mov	r0,@seed
	152736	
052713	001000		jmp	ret
	016076	
052715		
	001201	rand:	mov	@seed,r1
	152736	
052717	001272		mov	13077.,r2
	031425	
052721	000004		jsr	r5,call
	000760	
	000756	
052724	171442		mul
052725	001371		add	6925.,r1
	015415	
052727	001101		mov	r1,@seed
	152736	
052731	001671		and	77777,r1
	077777	
052733	000210		mov	r1,r0
052734	001000		jmp	ret0
	016052	
052736		
	000001	seed:	1
052737		
		VMEM	=	130000
		
		
		;
		; place a dot at row r0, column r1
		;
		
	000114	plot:	sll	2, r0
052740	000114		sll	2, r0
052741	000110		sll	1, r0			; mult r0 by 32.
052742	001370		add	VMEM, r0		; address of row
	130000	
052744	000212		mov	r1, r2
052745	001672		and	17, r2
	000017	
052747	000155		sar	2, r1
052750	000155		sar	2, r1			; divide r1 by 16.
052751	000301		add	r0, r1			; address of word
052752	001372		add	msktab, r2		; get bit mask
	152761	
052754	001213		mov	@r1, r3			; word to change
052755	001723		xor	@r2, r3
052756	001113		mov	r3, @r1			; change it
052757	001000		b	ret
	016032	
052761		
	000001	msktab:	.word	000001, 000002, 000004, 000010, 000020, 000040
	000002	
	000004	
	000010	
	000020	
	000040	
052767	000100		.word	000100, 000200, 000400, 001000, 002000, 004000
	000200	
	000400	
	001000	
	002000	
	004000	
052775	010000		.word	010000, 020000, 040000, 100000
	020000	
	040000	
	100000	
053001		
		;
		; draw a line from row r0, column r1 to row r2, column r3
		;
		
	001102	line:	mov	r2, @nx1
	153147	
053003	001103		mov	r3, @ny1
	153150	
053005	001274		mov	1, r4
	000001	
053007	000245		mov	r4, r5
053010	000402		sub	r0, r2
053011	001015		bge	lin.1
	000002	
053013	000042		neg	r2
053014	000044		neg	r4
053015	001102	lin.1:	mov	r2, @adx
	153143	
053017	001104		mov	r4, @sdx
	153145	
053021	000413		sub	r1, r3
053022	001015		bge	lin.2
	000002	
053024	000043		neg	r3
053025	000045		neg	r5
053026	001103	lin.2:	mov	r3, @ady
	153144	
053030	001105		mov	r5, @sdy
	153146	
053032	000523		cmp	r2, r3
053033	001015		bge	yalg
	000043	
053035	000722		clr	r2
053036	000004	xalg:	jsr	r5, call
	000760	
	000756	
053041	152737		plot
053042	001500		cmp	@nx1, r0
	153147	
053044	001004		beq	ret
	015745	
053046	001300		add	@sdx, r0
	153145	
053050	001402		sub	@ady, r2
	153144	
053052	000223		mov	r2, r3
053053	000224		mov	r2, r4
053054	001015		bge	xal.1
	000001	
053056	000042		neg	r2
053057	001303	xal.1:	add	@adx, r3
	153143	
053061	000235		mov	r3, r5
053062	001015		bge	xal.2
	000001	
053064	000043		neg	r3
053065	000523	xal.2:	cmp	r2, r3
053066	001015		bge	xal.3
	000005	
053070	000252		mov	r5, r2
053071	001301		add	@sdy, r1
	153146	
053073	001040		b	xalg
	000036	
053075	000242	xal.3:	mov	r4, r2
053076	001040		b	xalg
	000041	
053100		
	000722	yalg:	clr	r2
053101	000004	yal.4:	jsr	r5, call
	000760	
	000756	
053104	152737		plot
053105	001501		cmp	@ny1, r1
	153150	
053107	001004		beq	ret
	015702	
053111	001301		add	@sdy, r1
	153146	
053113	001302		add	@adx, r2
	153143	
053115	000223		mov	r2, r3
053116	000224		mov	r2, r4
053117	001015		bge	yal.1
	000001	
053121	000042		neg	r2
053122	001403	yal.1:	sub	@ady, r3
	153144	
053124	000235		mov	r3, r5
053125	001015		bge	yal.2
	000001	
053127	000043		neg	r3
053130	000523	yal.2:	cmp	r2, r3
053131	001015		bge	yal.3
	000005	
053133	000252		mov	r5, r2
053134	001300		add	@sdx, r0
	153145	
053136	001040		b	yal.4
	000036	
053140	000242	yal.3:	mov	r4, r2
053141	001040		b	yal.4
	000041	
053143		
	000000	adx:	.word	0
053144	000000	ady:	.word	0
053145	000000	sdx:	.word	0
053146	000000	sdy:	.word	0
053147	000000	nx1:	.word	0
053150	000000	ny1:	.word	0
053151		

Symbol Table

MAXX     =	000400	MAXY     =	001000	NL       =	000454	
VMEM     =	030000	adx      =	053143	ady      =	053144	
at       =	050374	call     =	070756	cnt1     =	050372	
cnt2     =	050373	div      =	071327	done     =	050312	
dx1      =	050375	dx2      =	050376	dy1      =	050377	
dy2      =	050400	flag     =	050401	lin.1    =	053015	
lin.2    =	053026	line     =	053001	lo.1     =	050102	
lo.2     =	050170	lo.3     =	050063	lo.5     =	050362	
loop     =	050032	msktab   =	052761	mul      =	071442	
nx1      =	053147	ny1      =	053150	pline    =	052677	
plot     =	052737	rand     =	052715	ret      =	071013	
ret0     =	071010	rnd      =	052662	sdx      =	053145	
sdy      =	053146	seed     =	052736	srand    =	052711	
tx1      =	050402	tx2      =	051056	ty1      =	051532	
ty2      =	052206	upx1     =	050266	upx1.1   =	050277	
upx1.2   =	050303	upx2     =	050242	upx2.1   =	050253	
upx2.2   =	050257	upy1     =	050216	upy1.1   =	050227	
upy1.2   =	050233	upy2.1   =	050203	upy2.2   =	050207	
vclrsc   =	072376	x1       =	050366	x2       =	050367	
xal.1    =	053057	xal.2    =	053065	xal.3    =	053075	
xalg     =	053036	y1       =	050370	y2       =	050371	
yal.1    =	053122	yal.2    =	053130	yal.3    =	053140	
yal.4    =	053101	yalg     =	053100	
